<html layout:decorate="~{layout}">
<div layout:fragment="content">
    <div id="myModal1" class="myModal"
         style="width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 99;">
        <div style="width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;">
            <span class="close" onclick="closeModal('myModal1')">&times;</span>
            <img src="/imgs/소년시대.jpg" alt="" style="height: 40%;">
        </div>
    </div>
    <div id="myModal2" class="myModal" style="width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 99;">
        <div style="width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;">
            <div>
                <span class="close" onclick="closeModal('myModal2')">&times;</span>
            </div>
            <img src="/imgs/경성크리처.jpg" alt="" style="height: 40%;">
        </div>
    </div>
    <div id="myModal3" class="myModal" style="width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 99;">
        <div style="width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;">
            <div>
                <span class="close" onclick="closeModal('myModal3')">&times;</span>
            </div>
            <img src="/imgs/운수오진날.jpg" alt="" style="height: 40%;">
        </div>
    </div>
    <div class="swiper mySwiper" style="width: 70%;">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <div style="display: flex; justify-content: center;">
                    <button class="openModalBtn" data-modal-id="myModal1">
                        <img src="/imgs/소년시대.jpg" alt="">
                    </button>
                </div>
            </div>
            <div class="swiper-slide">
                <div style="display: flex; justify-content: center;">
                    <button class="openModalBtn" data-modal-id="myModal2">
                        <img src="/imgs/경성크리처.jpg" alt="">
                    </button>
                </div>
            </div>
            <div class="swiper-slide">
                <div style="display: flex; justify-content: center;">
                    <button class="openModalBtn" data-modal-id="myModal3">
                        <img src="/imgs/운수오진날.jpg" alt="">
                    </button>
                </div>
            </div>
        </div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-pagination"></div>
    </div>
    <div class="swiper mySwiperA" style="width: 65%;">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <div style="display: flex; justify-content: center;">
                    <div style="width: 400px; height: 400px; background: green;"></div>
                </div>
            </div>
            <div class="swiper-slide">
                <div style="display: flex; justify-content: center;">
                    <div style="width: 400px; height: 400px; background: green;"></div>
                </div>
            </div>
            <div class="swiper-slide">
                <div style="display: flex; justify-content: center;">
                    <div style="width: 400px; height: 400px; background: green;"></div>
                </div>
            </div>
            <div class="swiper-slide">
                <div style="display: flex; justify-content: center;">
                    <div style="width: 400px; height: 400px; background: green;"></div>
                </div>
            </div>
        </div>
        <div class="swiper-pagination"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        var swiper = new Swiper(".mySwiper", {
          slidesPerView: 1,
          spaceBetween: 30,
          loop: true,
          pagination: {
            el: ".swiper-pagination",
            clickable: true,
          },
          navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
          },
        });

        var swiper = new Swiper(".mySwiperA", {
          slidesPerView: 1,
          spaceBetween: 30,
          loop: true,
          pagination: {
            el: ".swiper-pagination",
            clickable: true,
          },
          navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
          },
        });

    document.addEventListener('DOMContentLoaded', function() {
    const openModalBtns = document.querySelectorAll('.openModalBtn');

    openModalBtns.forEach(function(btn) {
        btn.addEventListener('click', function() {
            const modalId = btn.getAttribute('data-modal-id');
            openModal(modalId);
        });
    });

    window.addEventListener('click', function(event) {
        const modalCloseBtn = event.target.closest('.close');
        if (modalCloseBtn) {
            const modalId = modalCloseBtn.getAttribute('data-modal-id');
            closeModal(modalId);
        }
    });
});

    //  모달 창 열기
    function openModal(modalId) {
    console.log('modalid : '+ modalId);
        const modal = document.getElementById(modalId);
        modal.style.display = 'block';
        document.body.style.overflow = "hidden";
        document.body.style.paddingRight = `${getScrollbarWidth()}px`;
    }

    // 모달 창 닫기
    function closeModal(modalId) {
        const modal = document.getElementById(modalId);
        modal.style.display = 'none';
        document.body.style.overflow = "auto";
        document.body.style.paddingRight = '0';
    }

function getScrollbarWidth() {
    const scrollDiv = document.createElement('div');
    scrollDiv.style.width = '100px';
    scrollDiv.style.height = '100px';
    scrollDiv.style.overflow = 'scroll';
    scrollDiv.style.position = 'absolute';
    scrollDiv.style.top = '-9999px';
    document.body.appendChild(scrollDiv);
    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;
    document.body.removeChild(scrollDiv);
    return scrollbarWidth;
}
    </script>
</div>
</html>